apiVersion: v1
kind: ServiceAccount
metadata:
  name:  nginx
  namespace: nginx
---  
apiVersion: v1
kind: Secret
metadata:
  name: nginx-k8s-auth-secret
  namespace: nginx
  annotations:
    kubernetes.io/service-account.name: nginx
type: kubernetes.io/service-account-token
---
apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  name: nginx-token-review-binding
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: system:auth-delegator
subjects:
  - kind: ServiceAccount
    name: nginx
    namespace: nginx
---
apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-config
  namespace: nginx
data:
  nginx.conf: |
      server {
          listen 80;
          location / {
              root /vault/secrets;
              index index.html;
          }
        }